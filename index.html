<script>
const GRANTER = 0.0072; // 0.72 % per minute

function calcXp(){
  const cur = Math.max(50,Math.min(100,+document.getElementById('curStr').value));
  const tar = Math.max(51,Math.min(100,+document.getElementById('tarStr').value));
  const has = document.getElementById('hasXpBoost').checked;
  if(cur>=tar){alert('Target > Current');return;}

  const chanceSec = has ? 26 * cur / 60 / 100 : 0; // trigger chance /s
  const bonusAmt  = 150 * cur;                       // XP per trigger
  const xpSec     = 1 + chanceSec * bonusAmt;        // total XP each second
  const totalSec  = (tar - cur) / xpSec;             // seconds needed

  const h = Math.floor(totalSec / 3600);
  const m = Math.round((totalSec % 3600) / 60) || 0; // ‚Üê never zero

  document.getElementById('xpOut').innerHTML =
    `XP/s: <b>${xpSec.toFixed(2)}</b><br>` +
    `Time to target: <b>${h}h ${m}m</b>`;
}

function calcGranter(){
  const str = Math.max(50,Math.min(100,+document.getElementById('granterStr').value));
  const perSec = GRANTER * str / 60 / 100;
  const avg    = 1 / perSec;
  const wait95 = -Math.log(1-0.95) / perSec;

  const fmt = s=>{
    const h = Math.floor(s / 3600);
    const m = Math.round((s % 3600) / 60) || 0;
    return h ? `${h}h ${m}m` : `${m}m`;
  };
  document.getElementById('granterOut').innerHTML =
    `Average: <b>${fmt(avg)}</b><br>95 % within: <b>${fmt(wait95)}</b>`;
}
</script>
