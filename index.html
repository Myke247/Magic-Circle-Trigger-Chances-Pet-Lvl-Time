<script>
const BONUS_FLAT = 87;          // your sheet value
const GRANTER    = 0.0072;      // 0.72 % per minute

// ---------- XP ----------
function calcXp(){
  const cur  = Math.max(50, Math.min(100, +document.getElementById('curStr').value));
  const tar  = Math.max(51, Math.min(100, +document.getElementById('tarStr').value));
  const cMin = +document.getElementById('customChance').value;
  const has  = document.getElementById('hasXpBoost').checked;

  if(cur >= tar){ alert('Target must be > Current'); return; }

  const cSec   = has ? cMin / 60 / 100 : 0;   // % â†’ decimal /s
  const xpSec  = 1 + cSec * BONUS_FLAT;       // ticks + bonus
  const hours  = (tar - cur) / xpSec / 3600;

  document.getElementById('xpOut').innerHTML =
    `XP per second: <b>${xpSec.toFixed(2)}</b><br>` +
    `Time to target: <b>${hours.toFixed(1)} h</b>`;
}

// ---------- GRANTER ----------
function calcGranter(){
  const str = Math.max(50, Math.min(100, +document.getElementById('granterStr').value));
  const perSec = GRANTER * str / 60 / 100;
  const avg    = 1 / perSec;
  const wait95 = -Math.log(1-0.95) / perSec;

  const fmt = s => s<60 ? `${s.toFixed(1)} s` :
                  s<3600 ? `${(s/60).toFixed(1)} min` :
                           `${(s/3600).toFixed(1)} h`;

  document.getElementById('granterOut').innerHTML =
    `Average: <b>${fmt(avg)}</b><br>95 % sure within: <b>${fmt(wait95)}</b>`;
}
</script>
